(()=>{"use strict";const e=new class{constructor(){[this.img]=document.images,[this.wrap]=document.getElementsByClassName("wrapper"),this.header=document.getElementById("header_state"),this.successful=document.getElementById("score_successful"),this.unsuccessful=document.getElementById("score_unsuccessful"),this.insertImg=this.insertImg.bind(this),this.createCells=this.createCells.bind(this),this.oldIndex=null}init(){this.img.parentElement.removeChild(this.img),this.createCells()}createCells(){for(let e=0;e<16;e+=1){const e=document.createElement("div");this.wrap.appendChild(e)}}insertImg(){document.images[0]&&this.removeImg();this.wrap.children[function(e){let s;do{s=Math.floor(1+16*Math.random())}while(s===e);return s}()].append(this.img)}removeImg(){document.images[0].parentElement.removeChild(this.img)}showScore(e,s){this.header.innerText=s,this.successful.innerText=e.win,this.unsuccessful.innerText=e.loose}};e.init();const s=new class{constructor(e){this.gui=e,this.scores={win:0,loose:0},this.checkTarget=this.checkTarget.bind(this)}init(){this.gui.wrap.addEventListener("click",this.checkTarget),this.gui.insertImg(),this.timerId=setInterval((()=>{this.checkScores(!1)||(this.gui.showScore(this.scores,""),this.gui.insertImg())}),1e3)}checkScores(e){return this.scores.win>=5||this.scores.loose>=5?(clearInterval(this.timerId),this.gui.wrap.removeEventListener("click",this.checkTarget),this.gui.showScore(this.scores,"Игра окончена"),!0):(e?this.scores.loose-=1:this.scores.loose+=1,!1)}checkTarget(e){e.target===this.gui.img&&(this.scores.win+=1,this.gui.removeImg(),this.checkScores(!0))}}(e);s.init()})();